<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <title>Bestellsystem – Admin Ansicht</title>
  <link rel="stylesheet" href="styles.css">
  <style>
    .admin-table {width:100%; border-collapse:collapse; margin-top:2rem;}
    .admin-table th, .admin-table td {border:1px solid #ccc; padding:0.4rem;}
    .admin-table th {background:#f3f4f6;}
    .pdf-link {color:#2b70d2;}
  </style>
</head>
<body>
  <div class="container">
    <h1>Admin – Bestellübersicht</h1>
    <table class="admin-table" id="orders-table">
      <thead>
        <tr>
          <th>Bestellnummer</th>
          <th>Standort</th>
          <th>Datum</th>
          <th>Uhrzeit</th>
          <th>Total Artikel</th>
          <th>PDF</th>
        </tr>
      </thead>
      <tbody>
        <!-- Bestellungen aus JS -->
      </tbody>
    </table>
  </div>
  <script>
    // Passe die URL bei Bedarf an!
    const apiUrl = '/api/orders'; // Oder full URL zu deinem Backend
    
    async function loadOrders() {
      const table = document.querySelector('#orders-table tbody');
      table.innerHTML = '<tr><td colspan="6">Lade Daten ...</td></tr>';
      try {
        const res = await fetch(apiUrl);
        const json = await res.json();
        if (json.success && json.data.length > 0) {
          table.innerHTML = '';
          json.data.forEach(order => {
            table.innerHTML += `
              <tr>
                <td>${order.order_id}</td>
                <td>${order.location_name}</td>
                <td>${order.order_date}</td>
                <td>${order.order_time}</td>
                <td>${order.total_items || ''}</td>
                <td>${order.pdf_path ? `<a href="/backend/${order.pdf_path}" target="_blank" class="pdf-link">PDF</a>` : '-'} </td>
              </tr>
            `
          });
        } else {
          table.innerHTML = '<tr><td colspan="6">Keine Bestellungen gefunden.</td></tr>';
        }
      } catch (err) {
        table.innerHTML = `<tr><td colspan="6">Fehler beim Laden der Daten: ${err.message}</td></tr>`;
      }
    }
    window.onload = loadOrders;
  </script>
</body>
</html>